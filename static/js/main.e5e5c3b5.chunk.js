(this.webpackJsonppeerjs=this.webpackJsonppeerjs||[]).push([[0],{10:function(e,n,o){},11:function(e,n){function o(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}o.keys=function(){return[]},o.resolve=o,e.exports=o,o.id=11},13:function(e,n,o){"use strict";o.r(n);var t=o(1),l=o.n(t),r=o(4),i=o.n(r),c=(o(10),o(3)),u=o(5),d=o.n(u),a=o(0);var v=function(){var e=Object(t.useState)(""),n=Object(c.a)(e,2),o=n[0],l=n[1],r=Object(t.useState)(""),i=Object(c.a)(r,2),u=i[0],v=i[1],s=Object(t.useRef)(null),j=Object(t.useRef)(null),b=Object(t.useRef)(null),f=Object(t.useRef)(null),g=Object(t.useRef)(null);Object(t.useEffect)((function(){var e=new d.a;console.log("peer",e),e.on("open",(function(e){console.log("id",e),l(e)})),e.on("call",(function(e){var n,o,t,l;console.log("on call",e),((null===(n=navigator)||void 0===n?void 0:n.getUserMedia)||(null===(o=navigator)||void 0===o?void 0:o.webkitGetUserMedia)||(null===(t=navigator)||void 0===t?void 0:t.mozGetUserMedia))({video:null===e||void 0===e||null===(l=e.metadata)||void 0===l?void 0:l.video,audio:!0},(function(n){var o;s.current.srcObject=n,null===s||void 0===s||null===(o=s.current)||void 0===o||o.play(),null===e||void 0===e||e.answer(n),e.on("stream",(function(e){var n;(console.log("remoteStream",e,j.current,j.current.srcObject),j.current.srcObject)||(j.current.srcObject=e,null===j||void 0===j||null===(n=j.current)||void 0===n||n.play())})),e.on("close",(function(){console.log("Call closed"),O()})),g.current=n}),(function(e){console.log("Failed to get local stream",e)})),f.current=e})),e.on("close",(function(){console.log("Connection to PeerServer closed"),O()})),b.current=e}),[]);var O=function(){var e,n,o;(null===f||void 0===f?void 0:f.current)&&(null===f||void 0===f||null===(e=f.current)||void 0===e||e.close(),s.current.srcObject=null,j.current.srcObject=null,null===g||void 0===g||null===(n=g.current)||void 0===n||null===(o=n.getTracks())||void 0===o||o.forEach((function(e){return null===e||void 0===e?void 0:e.stop()})))};return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)("div",{children:o}),Object(a.jsx)("input",{type:"text",value:u,onChange:function(e){var n;return v(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)}}),Object(a.jsxs)("div",{children:[Object(a.jsx)("button",{onClick:function(){return function(e){var n,o,t;((null===(n=navigator)||void 0===n?void 0:n.getUserMedia)||(null===(o=navigator)||void 0===o?void 0:o.webkitGetUserMedia)||(null===(t=navigator)||void 0===t?void 0:t.mozGetUserMedia))({video:!1,audio:!0},(function(n){var o,t;s.current.srcObject=n,null===s||void 0===s||null===(o=s.current)||void 0===o||o.play();var l=null===b||void 0===b||null===(t=b.current)||void 0===t?void 0:t.call(e,n,{metadata:{video:!1}});l.on("stream",(function(e){var n;console.log("remoteStream",e),j.current.srcObject||(j.current.srcObject=e,null===j||void 0===j||null===(n=j.current)||void 0===n||n.play())})),f.current=l,g.current=n}),(function(e){console.log("Failed to get local stream",e)}))}(u)},children:"Audio Call"}),Object(a.jsx)("button",{onClick:function(){return function(e){var n,o,t;((null===(n=navigator)||void 0===n?void 0:n.getUserMedia)||(null===(o=navigator)||void 0===o?void 0:o.webkitGetUserMedia)||(null===(t=navigator)||void 0===t?void 0:t.mozGetUserMedia))({video:!0,audio:!0},(function(n){var o,t;s.current.srcObject=n,null===s||void 0===s||null===(o=s.current)||void 0===o||o.play();var l=null===b||void 0===b||null===(t=b.current)||void 0===t?void 0:t.call(e,n,{metadata:{video:!0}});l.on("stream",(function(e){var n;console.log("remoteStream",e),j.current.srcObject||(j.current.srcObject=e,null===j||void 0===j||null===(n=j.current)||void 0===n||n.play())})),f.current=l,g.current=n}),(function(e){console.log("Failed to get local stream",e)}))}(u)},children:"Video Call"}),Object(a.jsx)("button",{onClick:function(){if(null===g||void 0===g?void 0:g.current){var e,n=null===g||void 0===g||null===(e=g.current)||void 0===e?void 0:e.getAudioTracks();null===n||void 0===n||n.forEach((function(e){e.enabled=!(null===e||void 0===e?void 0:e.enabled)}))}},children:"Toggle Audio"}),Object(a.jsx)("button",{onClick:function(){if(null===g||void 0===g?void 0:g.current){var e,n=null===g||void 0===g||null===(e=g.current)||void 0===e?void 0:e.getVideoTracks();null===n||void 0===n||n.forEach((function(e){e.enabled=!(null===e||void 0===e?void 0:e.enabled)}))}},children:"Toggle Video"}),Object(a.jsx)("button",{onClick:function(){return O()},children:"Hang Up"})]}),Object(a.jsx)("div",{children:Object(a.jsx)("video",{ref:s,style:{width:"100px"}})}),Object(a.jsx)("div",{children:Object(a.jsx)("video",{ref:j,style:{width:"100px"}})})]})},s=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,14)).then((function(n){var o=n.getCLS,t=n.getFID,l=n.getFCP,r=n.getLCP,i=n.getTTFB;o(e),t(e),l(e),r(e),i(e)}))};i.a.render(Object(a.jsx)(l.a.StrictMode,{children:Object(a.jsx)(v,{})}),document.getElementById("root")),s()}},[[13,1,2]]]);
//# sourceMappingURL=main.e5e5c3b5.chunk.js.map